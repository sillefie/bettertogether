<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>BetterTogether - Publiek</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<div id="vote-screen" class="screen" style="display: none;">
    <h1 id="question-text">Wie is het meest romantisch?</h1>
    <button onclick="submitVote('Stefanie')">ğŸ‘° Stefanie</button>
    <button onclick="submitVote('Mathieu')">ğŸ¤µ Mathieu</button>
    <p id="vote-timer">12</p>
</div>

<div id="vote-feedback" class="screen" style="display: none;">
    <h1 id="vote-feedback-text"></h1>
</div>

<script>
let playerName = localStorage.getItem("playerName") || "";
let playerChoice = "";

function submitVote(choice) {
    if (!playerName) {
        alert("Gelieve eerst je naam in te vullen.");
        return;
    }
    playerChoice = choice;
    fetch("/vote", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name: playerName, choice: choice })
    }).then(() => {
        document.getElementById("vote-screen").style.display = "none";
        document.getElementById("vote-feedback").style.display = "block";
        fetch("/results").then(res => res.json()).then(data => {
            const winner = data.majority;
            let feedback = "";
            if (winner === choice) {
                feedback = "Yes! Je voelt dit koppel perfect aan. ğŸ¥°";
            } else {
                feedback = "Oeps, Stefanie en Mathieu denken er precies anders over. ğŸ¤­";
            }
            document.getElementById("vote-feedback-text").innerText = feedback;
        });
    });
}
</script>

  <div id="intro">
    <h1>Welkom!</h1>
    <p>We starten zo meteen.</p>
    <input id="nameInput" placeholder="Jouw naam">
    <button onclick="register()">Start</button>
  </div>

  <div id="question" style="display:none">
    <h2 id="questionText"></h2>
    <button onclick="vote('bruid')">ğŸ‘° Bruid</button>
    <button onclick="vote('bruidegom')">ğŸ¤µ Bruidegom</button>
  </div>

  <div id="waiting" style="display:none">
    <h2>Bedankt om te stemmen!</h2>
    <p>Wacht op het resultaat...</p>
  </div>

  <div id="feedback" style="display:none">
    <h2 id="feedbackText"></h2>
    <img id="aiImage" style="max-width:300px;display:none">
  </div>

  <div id="scoreboard" style="display:none">
    <h2>Top 10</h2>
    <ol id="rankingList"></ol>
  </div>

  <script src="/js/screen_public.js"></script>
</body>
</html>