<!DOCTYPE html>
<html lang="nl-NL">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Better Together &#8211; Stefanie &#038; Mathieu zeggen ja</title>
    <meta name="robots" content="noindex, nofollow" />
    <meta property="og:url" content="https://www.wearebettertogether.be/"/>
    <meta property="og:site_name" content="Better Together"/>
    <style>
        header {padding: 10px !important;}
        header img {min-width: 200px !important; max-width: 400px !important;}
    </style>
    <link rel="stylesheet" id="bootstrap-css" href="https://www.wearebettertogether.be/wp-content/themes/kalium/assets/css/bootstrap.css" media="all" />
    <link rel="stylesheet" id="style-css-override" href="css/style.css" media="all" />
    <script>var mobile_menu_breakpoint = 769;</script>
</head>
<body class="publiek page-template-default page wp-embed-responsive wpb-js-composer js-comp-ver-8.2 vc_responsive">
    <div class="wrapper" id="main-wrapper">
        <header class="main-header">
            <img itemprop="logo" src="img/logo.png" class="main-logo" alt="Better Together" style="width:50%; min-width: 500px; height: 100%;" />
        </header>
        <div id="container">
            <div id="start">
                <h1>Welkom!</h1>
                <div id="NaamInvullen">
                    <p>Vul je naam in om mee te doen!</p>
                    <input id="nameInput" placeholder="Jouw naam">
                    <button id="nameRegister" onclick="register()">Start</button>
                  </div>
                <p id="StartinginaSecond" style="display:none">We starten zo meteen.</p>
              </div>

              <div id="question" style="display:none">
                <h2 id="questionText"></h2>
                <button onclick="vote('Stefanie')">ðŸ‘° Stefanie</button>
                <button onclick="vote('Mathieu')">ðŸ¤µ Mathieu</button>
              </div>

              <div id="waiting" style="display:none">
                <h2>Bedankt om te stemmen!</h2>
                <p>Wacht op het resultaat â€¦</p>
              </div>
                <div id="feedback">
                  <p id="feedbackText"></p>
                </div>            
        </div>
    </div>
  <script>
    let ws = new WebSocket("wss://" + location.host + "/ws/public");

let currentScreen = "intro";
function register() {
  const name = document.getElementById("nameInput").value.trim();

  if (!name) {
    alert("Vul eerst je naam in.");
    return;
  }

  localStorage.setItem("player_name", name); // ? ? DEZE MOEST ERBIJ

  ws.send(JSON.stringify({ type: "register", name: name }));
  document.getElementById("NaamInvullen").style.display = "none";
  document.getElementById("StartinginaSecond").style.display = "";
  currentScreen = "intro";
}



function vote(v) {
  ws.send(JSON.stringify({ type: "vote", vote: v }));v
  document.getElementById("intro").style.display = "none";
  document.getElementById("question").style.display = "none";
  document.getElementById("waiting").style.display = "";
}

ws.onmessage = (event) => {
  const msg = JSON.parse(event.data);
  if (msg.type === "screen") {
    if (msg.screen === "question") {
      document.getElementById("question").style.display = "";
      document.getElementById("intro").style.display = "none";
      document.getElementById("waiting").style.display = "none";
      document.getElementById("feedback").style.display = "none";
      document.getElementById("scoreboard").style.display = "none";
    } else {
      document.getElementById("question").style.display = "none";
    }
  } else if (msg.type === "question") {
    document.getElementById("questionText").innerText = msg.text;
    document.getElementById("question").style.display = "";
    document.getElementById("waiting").style.display = "none";
    document.getElementById("feedback").style.display = "none";
    document.getElementById("scoreboard").style.display = "none";
      document.getElementById("intro").style.display = "none";
 } else if (msg.type === "feedback") {
    document.getElementById("question").style.display = "none";
    document.getElementById("waiting").style.display = "none";
    document.getElementById("feedback").style.display = "";

    const playerName = localStorage.getItem("player_name");
    const playerVote = msg.votes?.[playerName];
    const coupleVote = msg.winning_name;

    const feedbackText = document.getElementById("feedbackText");
    feedbackText.innerText = "<h2>Bedankt om te stemmen!</h2><p>Wacht op het resultaat â€¦</p>";
  } else if (msg.type === "scoreboard") {
      document.getElementById("intro").style.display = "none";
    document.getElementById("feedback").style.display = "none";
    document.getElementById("waiting").style.display = "none";
    document.getElementById("scoreboard").style.display = "";
    const list = document.getElementById("rankingList");
    list.innerHTML = "";
    msg.ranking.forEach(([name, score]) => {
      const li = document.createElement("li");
      li.textContent = '${name} - ${score}';
      list.appendChild(li);
    });
  }
};</script>
</body>
</html>